
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Manejo de Cookies en Express.js · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="chapter6.html" />
    
    
    <link rel="prev" href="chapter4.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../rutas.html">
            
                <a href="../rutas.html">
            
                    
                    Estudiar rutas en express
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../rutas/chapter1.html">
            
                <a href="../rutas/chapter1.html">
            
                    
                    Routing Básico
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../rutas/chapter2.html">
            
                <a href="../rutas/chapter2.html">
            
                    
                    Routing General
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../rutas/chapter3.html">
            
                <a href="../rutas/chapter3.html">
            
                    
                    Middleware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../rutas/chapter4.html">
            
                <a href="../rutas/chapter4.html">
            
                    
                    Router API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../rutas/links.html">
            
                <a href="../rutas/links.html">
            
                    
                    Links
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../cookies.html">
            
                <a href="../cookies.html">
            
                    
                    Estudiar cookies y sessions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="chapter1.html">
            
                <a href="chapter1.html">
            
                    
                    Introducción a las cookies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="chapter1b.html">
            
                <a href="chapter1b.html">
            
                    
                    Seguridad y privacidad
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="chapter3.html">
            
                <a href="chapter3.html">
            
                    
                    Query String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="chapter4.html">
            
                <a href="chapter4.html">
            
                    
                    Analizador de Cookies
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.5" data-path="chapter5.html">
            
                <a href="chapter5.html">
            
                    
                    Manejo de Cookies en Express.js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="chapter6.html">
            
                <a href="chapter6.html">
            
                    
                    Autenticación y autorización en node.js mediante Express.js
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Manejo de Cookies en Express.js</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="manejo-de-cookies-en-expressjs">Manejo de Cookies en Express.js</h1>
<p>Para el manejo de cookies a trav&#xE9;s de Express.js es necesario utilizar el middleware cookie-parser, que puede ser instalado como cualquier otro m&#xF3;dulo de node.js con <code>npm install cookie-parser</code>.</p>
<h2 id="usando-cookie-parser">Usando Cookie-Parser</h2>
<p>Para utilizar cookie-parser es necesario incluirlo en la aplicaci&#xF3;n como se hace con cualquier middleware de Express.js</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> cookieParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;cookie-parser&apos;</span>);

<span class="hljs-keyword">var</span> app = express();
app.use(cookieParser());
</code></pre>
<p>cookie-parser ubica en el objeto req, bajo req.cookies con un objeto que identifica las cookies por un nombre, un string. Para definir una cookie nueva se define una nueva ruta en la aplicaci&#xF3;n Express.js de la siguiente manera:</p>
<pre><code class="lang-javascript">app.get(<span class="hljs-string">&apos;/cookie&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
     res.cookie(cookie_name , <span class="hljs-string">&apos;cookie_value&apos;</span>).send(<span class="hljs-string">&apos;Cookie is set&apos;</span>);
});
</code></pre>
<p>Para revisar si una cookie ha sido asignada correctamente, se puede ir a la consola del navegador que se est&#xE9; usando e introducir el comando <code>document.cookie</code>.</p>
<p>El navegador manda de vuelta esa cookie al servidor cada vez que hace una petici&#xF3;n al sitio. Para conseguir una cookie que el navegador est&#xE1; enviando al servidor mediante el objeto request podemos utilizar <code>req.cookies</code>. De esta manera el c&#xF3;digo siguiente registrar&#xE1; en la consola las cookies cuando el cliente env&#xED;e una:</p>
<pre><code class="lang-javascript">app.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Cookies :  &quot;</span>, req.cookies);
});
</code></pre>
<p>Fijar el tiempo de expiraci&#xF3;n de una cookie se hace fijando una fecha mediante el campo <code>expire</code> de la siguiente manera:</p>
<pre><code class="lang-javascript">res.cookie(name , <span class="hljs-string">&apos;value&apos;</span>, {expire : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() + <span class="hljs-number">9999</span>});
</code></pre>
<p>Como con el tiempo de expiraci&#xF3;n, podemos fijar m&#xE1;s opciones para la cookie de igual manera, afectando otros atributos. <code>expire</code>, por ejemplo, aguanta el tiempo de expiraci&#xF3;n en milisegundos. Tambi&#xE9;n se puede usar el atributo <code>maxAge</code>.</p>
<p>Para eliminar una cookie se utiliza el m&#xE9;todo <code>clearCookie</code>, que eliminar&#xE1; una cookie referenciada por su nombre. Por ejemplo, para eliminar la cookie <code>pepito</code> hacemos:</p>
<pre><code class="lang-javascript">clearCookie(<span class="hljs-string">&quot;pepito&quot;</span>);
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="chapter4.html" class="navigation navigation-prev " aria-label="Previous page: Analizador de Cookies">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="chapter6.html" class="navigation navigation-next " aria-label="Next page: Autenticación y autorización en node.js mediante Express.js">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Manejo de Cookies en Express.js","level":"1.3.5","depth":2,"next":{"title":"Autenticación y autorización en node.js mediante Express.js","level":"1.3.6","depth":2,"path":"cookies/chapter6.md","ref":"cookies/chapter6.md","articles":[]},"previous":{"title":"Analizador de Cookies","level":"1.3.4","depth":2,"path":"cookies/chapter4.md","ref":"cookies/chapter4.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"cookies/chapter5.md","mtime":"2017-03-16T17:26:06.414Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-16T17:55:46.003Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

